!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequired76b;function i(){const e=document.querySelector(".footer-modal-js"),t=document.querySelector(".about-modal-js"),n=document.querySelector(".about-modal__close-js"),o=document.querySelector(".backdrop-js"),a=document.querySelector("body"),r=document.querySelector(".search__form"),i=document.querySelector(".movie-list"),s=document.querySelector(".container.movie"),l=document.querySelector("main"),c=document.querySelector(".search__input"),d=document.querySelector(".pagination"),u=document.querySelector(".js-modal"),m=document.querySelector(".overlay"),v=document.querySelector(".modal__info"),p=document.querySelector(".close-btn"),f=document.querySelector(".queue__button"),y=document.querySelector(".watched__button");return{searchForm:r,gallery:i,searchInput:c,paginationDiv:d,modal:u,overlay:m,modal__info:v,modalCloseBtn:p,footerModalEl:e,footerAboutModalEl:t,footerCloseBtn:n,footerBackdrop:o,bodyEl:a,backdropTrailer:document.querySelector(".backdrop-trailer"),playerDiv:document.querySelector(".player"),footerModalEl:e,queueBtn:f,watchedBtn:y,library:l,moviesContainer:s}}null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequired76b=r),r.register("iE7OH",(function(t,n){var o,a;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},a=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("aNJCr",(function(t,n){var o;e(t.exports,"getBundleURL",(function(){return o}),(function(e){return o=e}));var a={};function r(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=a[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),a[e]=t),t}})),r("iE7OH").register(JSON.parse('{"jNRdE":"library.c91ffb24.js","eKkGD":"play-button.6ab4f177.png","9vbMg":"empty-collection.9b5b83aa.jpg"}'));var s;function l(e,t){const n=t.map((({fullposter_path:e,title:t,genres:n,release_year:o,overview:a,popularity:r,vote_average:i,vote_count:s,id:l})=>`\n      <li class="movie-list__item"\n          data-id="${l}"\n          data-title="${t}"\n          data-genres="${n}"\n          data-year="${o}"\n          data-poster="${e}"\n          data-popularity="${r}"\n          data-vote="${i}"\n          data-votes="${s}"\n          data-about="${a}">\n        <img class="movie-list__img" src=${e} alt=${t}>\n        <div class="movie-list__info">\n          <h2 class="movie-list__title">${t}</h2>\n          <p class="movie-list__text">${n} | ${o}</p>\n        </div>\n      </li>\n    `)).join("");e.insertAdjacentHTML("beforeend",n)}s=r("aNJCr").getBundleURL("jNRdE")+r("iE7OH").resolve("eKkGD");var c;c=r("aNJCr").getBundleURL("jNRdE")+r("iE7OH").resolve("9vbMg");const d="watchedMovies",u="queueMovies",m=new class{saveToLibrary(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}loadFromLibrary(){try{return JSON.parse(localStorage.getItem(this.storageKey))||[]}catch(e){return console.log("Error: ",e.message),[]}}get key(){return this.storageKey}set key(e){this.storageKey=e}constructor(){this.storageKey=""}},{gallery:v,moviesContainer:p}=i();function f(e){const{title:t,genres:n,poster:o,year:a,vote:r,votes:i,about:s,popularity:l,id:c}=e;return{id:c,fullposter_path:o,title:t,genres:n,release_year:a,overview:s,popularity:l,vote_average:r,vote_count:i}}function y(e){m.key=e;const n=m.loadFromLibrary();if(v.innerHTML="",n.length)document.querySelector(".emptyCollection")?.remove(),l(v,n);else{const e=`<div class="emptyCollection"><img src="${t(c)}" alt="emptyCollection"/></div>`;p.insertAdjacentHTML("afterbegin",e)}}function _(e,t=null){t&&e.push(t),m.key=d,m.saveToLibrary(e)}function g(e,t=null){t&&e.push(t),m.key=u,m.saveToLibrary(e)}const{overlay:b,modal:h,modal__info:L,modalCloseBtn:q}=i();let w="",E=(m.key=d,m.loadFromLibrary()),S=(m.key=u,m.loadFromLibrary()),$="";function k(e){const t=f(w.dataset),{id:n}=w.dataset;return $=n,e.target.classList.contains("add-watched")?(_(E,t),e.target.classList.add("delete-watched"),e.target.classList.remove("add-watched"),e.target.textContent="Delete from watched",d):e.target.classList.contains("delete-watched")?(E=E.filter((e=>e.id!==n)),_(E),e.target.classList.add("add-watched"),e.target.classList.remove("delete-watched"),e.target.textContent="Add to watched",d):e.target.classList.contains("add-queue")?(g(S,t),e.target.classList.add("delete-queue"),e.target.classList.remove("add-queue"),e.target.textContent="Delete from queue",u):e.target.classList.contains("delete-queue")?(S=S.filter((e=>e.id!==n)),g(S),e.target.classList.add("add-queue"),e.target.classList.remove("delete-queue"),e.target.textContent="Add to queue",u):void 0}function C(){h.classList.add("hidden"),b.classList.add("hidden"),document.removeEventListener("keydown",x)}function x(e){e.preventDefault(),"Escape"===e.code&&(console.log("Ecsape was pressed"),C())}const{queueBtn:j,watchedBtn:H,gallery:M,modal:O}=i();y(d),document.addEventListener("DOMContentLoaded",(function(){H.focus()})),H.addEventListener("click",(function(){j.classList.remove("library__button--active"),H.classList.add("library__button--active"),y(d)})),j.addEventListener("click",(function(){j.classList.add("library__button--active"),H.classList.remove("library__button--active"),y(u)})),M.addEventListener("click",(function(e){w=e.target.closest(".movie-list__item");const{id:n,title:o,genres:a,poster:r,popularity:i,about:l,votes:c,vote:d}=w.dataset;let u='class="modal__btn add-queue">add to queue';S.filter((e=>e.id===n)).length&&(u='class="modal__btn delete-queue btn-accent">Delete from queue');let m='class="modal__btn add-watched btn-accent">add to Watched';E.filter((e=>e.id===n)).length&&(m='class="modal__btn delete-watched btn-accent">Delete from Watched');const v=`\n  <div class="img-wrapper">\n    <img\n      class="modal__img play"\n      src="${r}"\n      alt="poster"\n    />\n    <img\n      class="play-icon play"\n      src="${t(s)}"\n      alt="play-icon"\n    />\n  </div>\n  <div class="movie-description">\n    <h2 class="movie-title">${o}</h2>\n    <ul class="movie-info__list">\n      <li class="movie-info__item">\n        <p class="info-name">Vote / Votes</p>\n        <p class="info-value votes-wrapper"><span class="vote-average">${d}</span> / ${c}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Popularity</p>\n        <p class="info-value">${i}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Original Title</p>\n        <p class="info-value">${o}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Genre</p>\n        <p class="info-value">${a}</p>\n      </li>\n    </ul>\n    <div class="movie-about">\n      <p class="about__title">About</p>\n      <p class="about__text">${l}</p>\n    </div>\n    <div class="btn-wrapper">\n      <button ${m}</button>\n      <button ${u}</button>\n    </div >\n  </div > `;L.innerHTML=v,h.classList.remove("hidden"),b.classList.remove("hidden"),document.addEventListener("keydown",x),q.addEventListener("click",C),b.addEventListener("click",C)})),O.addEventListener("click",(function(e){const t=k(e);switch(t){case d:H.classList.contains("library__button--active")&&y(t);break;case u:j.classList.contains("library__button--active")&&y(t)}}))}();
//# sourceMappingURL=library.c91ffb24.js.map

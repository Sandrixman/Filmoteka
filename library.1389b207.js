function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequired76b;function l(){const e=document.querySelector(".footer-modal-js"),t=document.querySelector(".about-modal-js"),n=document.querySelector(".about-modal__close-js"),o=document.querySelector(".backdrop-js"),a=document.querySelector("body"),r=document.querySelector(".search__form"),l=document.querySelector(".movie-list"),i=document.querySelector("main"),s=document.querySelector(".search__input"),d=document.querySelector(".pagination"),c=document.querySelector(".js-modal"),u=document.querySelector(".overlay"),m=document.querySelector(".modal__info"),v=document.querySelector(".close-btn"),p=document.querySelector(".queue__button"),f=document.querySelector(".watched__button");return{searchForm:r,gallery:l,searchInput:s,paginationDiv:d,modal:c,overlay:u,modal__info:m,modalCloseBtn:v,footerModalEl:e,footerAboutModalEl:t,footerCloseBtn:n,footerBackdrop:o,bodyEl:a,backdropTrailer:document.querySelector(".backdrop-trailer"),playerDiv:document.querySelector(".player"),footerModalEl:e,queueBtn:p,watchedBtn:f,library:i}}null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},n.parcelRequired76b=r),r.register("kyEFX",(function(t,n){var o,a;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},a=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("kyEFX").register(JSON.parse('{"bHX8u":"library.1389b207.js","J32rF":"play-button.6ab4f177.png","lxZSd":"empty-collection.9b5b83aa.jpg"}'));var i;function s(e,t){const n=t.map((({fullposter_path:e,title:t,genres:n,release_year:o,overview:a,popularity:r,vote_average:l,vote_count:i,id:s})=>`\n      <li class="movie-list__item"\n          data-id="${s}"\n          data-title="${t}"\n          data-genres="${n}"\n          data-year="${o}"\n          data-poster="${e}"\n          data-popularity="${r}"\n          data-vote="${l}"\n          data-votes="${i}"\n          data-about="${a}">\n        <img class="movie-list__img" src=${e} alt=${t}>\n        <div class="movie-list__info">\n          <h2 class="movie-list__title">${t}</h2>\n          <p class="movie-list__text">${n} | ${o}</p>\n        </div>\n      </li>\n    `)).join("");e.insertAdjacentHTML("beforeend",n)}i=new URL(r("kyEFX").resolve("J32rF"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("lxZSd"),import.meta.url).toString();const c="watchedMovies",u="queueMovies",m=new class{saveToLibrary(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}loadFromLibrary(){try{return JSON.parse(localStorage.getItem(this.storageKey))||[]}catch(e){return console.log("Error: ",e.message),[]}}get key(){return this.storageKey}set key(e){this.storageKey=e}constructor(){this.storageKey=""}},{gallery:v,library:p}=l();function f(){m.key=c;const e=m.loadFromLibrary();if(v.innerHTML="",e.length&&s(v,e),!e.length){const e=`\n    <div">\n      <img\n        class="emptyCollection"\n        src="${t(d)}"\n        alt="emptyCollection"\n      />\n    </div>\n    `;p.innerHTML=e}}function y(e){m.key=c,m.saveToLibrary(e)}function _(e){m.key=u,m.saveToLibrary(e)}const{overlay:g,modal:b,modal__info:h,modalCloseBtn:L}=l();let q="",w=(m.key=c,m.loadFromLibrary()),S=(m.key=u,m.loadFromLibrary()),E="";function $(){b.classList.add("hidden"),g.classList.add("hidden"),document.removeEventListener("keydown",k)}function k(e){e.preventDefault(),"Escape"===e.code&&(console.log("Ecsape was pressed"),$())}b.addEventListener("click",(function(e){const{title:t,genres:n,poster:o,year:a,vote:r,votes:l,about:i,popularity:s,id:d}=q.dataset;if(E=d,e.target.classList.contains("add-watched")){const c={id:d,fullposter_path:o,title:t,genres:n,release_year:a,overview:i,popularity:s,vote_average:r,vote_count:l};return w.push(c),y(w),e.target.classList.add("delete-watched"),e.target.classList.remove("add-watched"),void(e.target.textContent="Delete from watched")}if(e.target.classList.contains("delete-watched"))return w=w.filter((e=>e.id!==d)),y(w),e.target.classList.add("add-watched"),e.target.classList.remove("delete-watched"),void(e.target.textContent="Add to watched");if(e.target.classList.contains("add-queue")){const c={id:d,fullposter_path:o,title:t,genres:n,release_year:a,overview:i,popularity:s,vote_average:r,vote_count:l};return S.push(c),_(S),e.target.classList.add("delete-queue"),e.target.classList.remove("add-queue"),void(e.target.textContent="Delete from queue")}if(e.target.classList.contains("delete-queue"))return S=S.filter((e=>e.id!==d)),_(S),e.target.classList.add("add-queue"),e.target.classList.remove("delete-queue"),void(e.target.textContent="Add to queue")}));const{queueBtn:F,watchedBtn:x,gallery:M}=l();f(),document.addEventListener("DOMContentLoaded",(function(){x.focus()})),x.addEventListener("click",f),F.addEventListener("click",(function(){m.key=u;const e=m.loadFromLibrary();v.innerHTML="",e.length&&s(v,e)})),M.addEventListener("click",(function(e){q=e.target.closest(".movie-list__item");const{id:n,title:o,genres:a,poster:r,popularity:l,about:s,votes:d,vote:c}=q.dataset;let u='class="modal__btn add-queue">add to queue';S.filter((e=>e.id===n)).length&&(u='class="modal__btn delete-queue btn-accent">Delete from queue');let m='class="modal__btn add-watched btn-accent">add to Watched';w.filter((e=>e.id===n)).length&&(m='class="modal__btn delete-watched btn-accent">Delete from Watched');const v=`\n  <div class="img-wrapper">\n    <img\n      class="modal__img play"\n      src="${r}"\n      alt="poster"\n    />\n    <img\n      class="play-icon play"\n      src="${t(i)}"\n      alt="play-icon"\n    />\n  </div>\n  <div class="movie-description">\n    <h2 class="movie-title">${o}</h2>\n    <ul class="movie-info__list">\n      <li class="movie-info__item">\n        <p class="info-name">Vote / Votes</p>\n        <p class="info-value votes-wrapper"><span class="vote-average">${c}</span> / ${d}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Popularity</p>\n        <p class="info-value">${l}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Original Title</p>\n        <p class="info-value">${o}</p>\n      </li>\n      <li class="movie-info__item">\n        <p class="info-name">Genre</p>\n        <p class="info-value">${a}</p>\n      </li>\n    </ul>\n    <div class="movie-about">\n      <p class="about__title">About</p>\n      <p class="about__text">${s}</p>\n    </div>\n    <div class="btn-wrapper">\n      <button ${m}</button>\n      <button ${u}</button>\n    </div >\n  </div > `;h.innerHTML=v,b.classList.remove("hidden"),g.classList.remove("hidden"),document.addEventListener("keydown",k),L.addEventListener("click",$),g.addEventListener("click",$)}));
//# sourceMappingURL=library.1389b207.js.map
